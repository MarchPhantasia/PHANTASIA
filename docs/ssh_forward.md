
# SSH中的正向/反向代理

*2024.6.23*

https://keuin.cc/blog/ssh-proxy/

https://www.cnblogs.com/shiqi17/p/15324325.html

## 正向代理

客户端 => 代理服务器 => 远程主机

为了创建一个SSH的正向代理，需要使用`-L`开关：`-L X:host:Y`意思是将host(远程主机)的`Y`端口映射到客户端回环地址的`X`端口。

举个例子：我想要通过`192.168.1.2`的ssh服务访问到`192.168.40.1`的`80`端口，只需要执行

```shell
ssh -L 8888:192.168.40.1:80 192.168.1.2
# 这条命令实际上是省略了的，实际上是：
ssh -L 127.0.0.1:8888:192.168.40.1:80 192.168.1.2
# 或者：
ssh -L localhost:8888:192.168.40.1:80 192.168.1.2
# 或者：
ssh -L 0.0.0.0:8888:192.168.40.1:80 192.168.1.2
# 当然127.0.0.1和0.0.0.0还是有区别的，具体还未查询官方文档，所以还不能确实实际上是哪个
```
即可。ssh会要求你登录，然后会进入到你的shell，此时你就可以通过访问`localhost:8888`来访问`192.168.40.1:80`了。